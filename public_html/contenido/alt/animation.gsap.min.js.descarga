(function(e,n){if(typeof define==="function"&&define.amd){define(["ScrollMagic","TweenMax","TimelineMax"],n)}else if(typeof exports==="object"){require("gsap");n(require("scrollmagic"),TweenMax,TimelineMax)}else{n(e.ScrollMagic||e.jQuery&&e.jQuery.ScrollMagic,e.TweenMax||e.TweenLite,e.TimelineMax||e.TimelineLite)}})(this,function(e,h,v){"use strict";var n="animation.gsap";var i=window.console||{},r=Function.prototype.bind.call(i.error||i.log||function(){},i);if(!e){r("("+n+") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs.")}if(!h){r("("+n+") -> ERROR: TweenLite or TweenMax could not be found. Please make sure GSAP is loaded before ScrollMagic or use an asynchronous loader like requirejs.")}e.Scene.addOption("tweenChanges",false,function(e){return!!e});e.Scene.extend(function(){var d=this,p;var g=function(){if(d._log){Array.prototype.splice.call(arguments,1,0,"("+n+")","->");d._log.apply(this,arguments)}};d.on("progress.plugin_gsap",function(){w()});d.on("destroy.plugin_gsap",function(e){d.removeTween(e.reset)});var w=function(){if(p){var e=d.progress(),n=d.state();if(p.repeat&&p.repeat()===-1){if(n==="DURING"&&p.paused()){p.play()}else if(n!=="DURING"&&!p.paused()){p.pause()}}else if(e!=p.progress()){if(d.duration()===0){if(e>0){p.play()}else{p.reverse()}}else{if(d.tweenChanges()&&p.tweenTo){p.tweenTo(e*p.duration())}else{p.progress(e).pause()}}}}};d.setTween=function(e,n,i){var r;if(arguments.length>1){if(arguments.length<3){i=n;n=1}e=h.to(e,n,i)}try{if(v){r=gsap.timeline({smoothChildTiming:true}).add(e)}else{r=e}r.pause()}catch(c){g(1,"ERROR calling method 'setTween()': Supplied argument is not a valid TweenObject");return d}if(p){d.removeTween()}p=r;if(e.repeat&&e.repeat()===-1){p.repeat(-1);p.yoyo(e.yoyo())}if(d.tweenChanges()&&!p.tweenTo){g(2,"WARNING: tweenChanges will only work if the TimelineMax object is available for ScrollMagic.")}if(p&&d.controller()&&d.triggerElement()&&d.loglevel()>=2){var t=h.getTweensOf(d.triggerElement()),o=d.controller().info("vertical");t.forEach(function(e,n){var i=e.vars.css||e.vars,r=o?i.top!==undefined||i.bottom!==undefined:i.left!==undefined||i.right!==undefined;if(r){g(2,"WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!");return false}})}if(parseFloat(TweenLite.version)>=1.14){var a=p.getChildren?p.getChildren(true,true,false):[p],l=function(){g(2,"WARNING: tween was overwritten by another. To learn how to avoid this issue see here: https://github.com/janpaepke/ScrollMagic/wiki/WARNING:-tween-was-overwritten-by-another")};for(var s=0,f,u;s<a.length;s++){f=a[s];if(u!==l){u=f.vars.onOverwrite;f.vars.onOverwrite=function(){if(u){u.apply(this,arguments)}l.apply(this,arguments)}}}}g(3,"added tween");w();return d};d.removeTween=function(e){if(p){if(e){p.progress(0).pause()}p.kill();p=undefined;g(3,"removed tween (reset: "+(e?"true":"false")+")")}return d}})});